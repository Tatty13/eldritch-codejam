(()=>{"use strict";var e="./dist/";const r={azathoth:e+"e76cc60e6f2b9bb167ce.png",cthulhu:e+"e7bfd029744dc9f87c1a.png",iogSothoth:e+"c5b7717bff973cda27be.png",shubNiggurath:e+"68c4272e00c9596e65b1.png"},c=[{id:"azathoth",name:"azathoth",cardFace:r.azathoth,firstStage:{greenCards:1,brownCards:2,blueCards:1},secondStage:{greenCards:2,brownCards:3,blueCards:1},thirdStage:{greenCards:2,brownCards:4,blueCards:0}},{id:"cthulhu",name:"cthulhu",cardFace:r.cthulhu,firstStage:{greenCards:0,brownCards:2,blueCards:2},secondStage:{greenCards:1,brownCards:3,blueCards:0},thirdStage:{greenCards:3,brownCards:4,blueCards:0}},{id:"iogSothoth",name:"iogSothoth",cardFace:r.iogSothoth,firstStage:{greenCards:0,brownCards:2,blueCards:1},secondStage:{greenCards:2,brownCards:3,blueCards:1},thirdStage:{greenCards:3,brownCards:4,blueCards:0}},{id:"shubNiggurath",name:"shubNiggurath",cardFace:r.shubNiggurath,firstStage:{greenCards:1,brownCards:2,blueCards:1},secondStage:{greenCards:3,brownCards:2,blueCards:1},thirdStage:{greenCards:2,brownCards:4,blueCards:0}}],n=[{id:"very easy",name:"Очень низкая",cardsDifficulty:["easy"]},{id:"easy",name:"Низкая",cardsDifficulty:["easy","normal"]},{id:"normal",name:"Средняя",cardsDifficulty:["easy","normal","hard"]},{id:"hard",name:"Высокая",cardsDifficulty:["normal","hard"]},{id:"Very hard",name:"Очень высокая",cardsDifficulty:["hard"]}],a={brown1:e+"ac85e7db9ab360fe235a.png",brown2:e+"c44579505d0d3ccfd7c8.png",brown3:e+"caababcab21e08510c27.png",brown4:e+"e387b64a537a0fb25c84.png",brown5:e+"709f87f82c146ab3189a.png",brown6:e+"23453f970c4a388f8b68.png",brown7:e+"7da5050420b14d67a481.png",brown8:e+"2126fcd965be3b428dca.png",brown9:e+"3d69a01cdd56175f304e.png",brown10:e+"703068f44f9153534f9c.png",brown11:e+"157fd0a92444cc2a245f.png",brown12:e+"920b1409d3f7d006e764.png",brown13:e+"a8d77ff5b5eaa534b968.png",brown14:e+"f5d21e1965d8ec808bc2.png",brown15:e+"036f8f91eccd0e8f9708.png",brown16:e+"1fd61bbd111986a0965a.png",brown17:e+"6a53cc04a2d6cbb63677.png",brown18:e+"c537bfb2cd284c9667ae.png",brown19:e+"199841521c55940d0d03.png",brown20:e+"1182a8f80bd2272b3d07.png",brown21:e+"3a8e72879e11c315c59d.png"},d=[{id:"brown1",cardFace:a.brown1,difficulty:"normal",color:"brown"},{id:"brown2",cardFace:a.brown2,difficulty:"normal",color:"brown"},{id:"brown3",cardFace:a.brown3,difficulty:"normal",color:"brown"},{id:"brown4",cardFace:a.brown4,difficulty:"normal",color:"brown"},{id:"brown5",cardFace:a.brown5,difficulty:"normal",color:"brown"},{id:"brown6",cardFace:a.brown6,difficulty:"hard",color:"brown"},{id:"brown7",cardFace:a.brown7,difficulty:"hard",color:"brown"},{id:"brown8",cardFace:a.brown8,difficulty:"hard",color:"brown"},{id:"brown9",cardFace:a.brown9,difficulty:"hard",color:"brown"},{id:"brown10",cardFace:a.brown10,difficulty:"hard",color:"brown"},{id:"brown11",cardFace:a.brown11,difficulty:"easy",color:"brown"},{id:"brown12",cardFace:a.brown12,difficulty:"easy",color:"brown"},{id:"brown13",cardFace:a.brown13,difficulty:"easy",color:"brown"},{id:"brown14",cardFace:a.brown14,difficulty:"easy",color:"brown"},{id:"brown15",cardFace:a.brown15,difficulty:"normal",color:"brown"},{id:"brown16",cardFace:a.brown16,difficulty:"normal",color:"brown"},{id:"brown17",cardFace:a.brown17,difficulty:"normal",color:"brown"},{id:"brown18",cardFace:a.brown18,difficulty:"normal",color:"brown"},{id:"brown19",cardFace:a.brown19,difficulty:"normal",color:"brown"},{id:"brown20",cardFace:a.brown20,difficulty:"normal",color:"brown"},{id:"brown21",cardFace:a.brown21,difficulty:"easy",color:"brown"}],o={blue1:e+"09c8e5eb50dc7666f1aa.png",blue2:e+"3cc352cdc8fade5dad4c.png",blue3:e+"fdd1d10ff513774eb841.png",blue4:e+"f09f0f715e525a0b50ec.png",blue5:e+"e3e8792622b0c75c78c1.png",blue6:e+"cf323c98a3f54632a66c.png",blue7:e+"4cdb1bd641372e2d0f74.png",blue8:e+"02a9eec68518951fc18e.png",blue9:e+"d3371911f8f0d84b5585.png",blue10:e+"c61c9f73492d8cd7027c.png",blue11:e+"f7e6552a92e4b878107a.png",blue12:e+"204f9160083e529ab763.png"},i=[{id:"blue1",cardFace:o.blue1,difficulty:"hard",color:"blue"},{id:"blue2",cardFace:o.blue2,difficulty:"hard",color:"blue"},{id:"blue3",cardFace:o.blue3,difficulty:"easy",color:"blue"},{id:"blue4",cardFace:o.blue4,difficulty:"easy",color:"blue"},{id:"blue5",cardFace:o.blue5,difficulty:"easy",color:"blue"},{id:"blue6",cardFace:o.blue6,difficulty:"hard",color:"blue"},{id:"blue7",cardFace:o.blue7,difficulty:"normal",color:"blue"},{id:"blue8",cardFace:o.blue8,difficulty:"hard",color:"blue"},{id:"blue9",cardFace:o.blue9,difficulty:"normal",color:"blue"},{id:"blue10",cardFace:o.blue10,difficulty:"easy",color:"blue"},{id:"blue11",cardFace:o.blue11,difficulty:"normal",color:"blue"},{id:"blue12",cardFace:o.blue12,difficulty:"normal",color:"blue"}],l={green1:e+"ee9218f13d2668469469.png",green2:e+"1a1b4da17274000ce3a8.png",green3:e+"24a6de1c53f0cc14bb95.png",green4:e+"d9d9a3dc837a4101fc61.png",green5:e+"0634bb414e136066d46f.png",green6:e+"ca07046ad17914ec04d0.png",green7:e+"f9d8238c6770bdc97f73.png",green8:e+"bc5f83ed7ced1b832494.png",green9:e+"bc368631ac89e5bf0891.png",green10:e+"766beb973fc76ac9564e.png",green11:e+"305fdb3b09ad909c598f.png",green12:e+"b786b0a5e0aaf884c27b.png",green13:e+"b3e3243ad3927ba66da7.png",green14:e+"20b6b1be80bef6932ab0.png",green15:e+"63677766cd3a4cea8da0.png",green16:e+"608e0aecaccf5ff896fb.png",green17:e+"0ebea1f5b536a0b85765.png",green18:e+"268edbdc27e016d06a52.png"},t=[{id:"green1",cardFace:l.green1,difficulty:"easy",color:"green"},{id:"green2",cardFace:l.green2,difficulty:"hard",color:"green"},{id:"green3",cardFace:l.green3,difficulty:"hard",color:"green"},{id:"green4",cardFace:l.green4,difficulty:"hard",color:"green"},{id:"green5",cardFace:l.green5,difficulty:"hard",color:"green"},{id:"green6",cardFace:l.green6,difficulty:"hard",color:"green"},{id:"green7",cardFace:l.green7,difficulty:"normal",color:"green"},{id:"green8",cardFace:l.green8,difficulty:"normal",color:"green"},{id:"green9",cardFace:l.green9,difficulty:"normal",color:"green"},{id:"green10",cardFace:l.green10,difficulty:"normal",color:"green"},{id:"green11",cardFace:l.green11,difficulty:"normal",color:"green"},{id:"green12",cardFace:l.green12,difficulty:"easy",color:"green"},{id:"green13",cardFace:l.green13,difficulty:"normal",color:"green"},{id:"green14",cardFace:l.green14,difficulty:"normal",color:"green"},{id:"green15",cardFace:l.green15,difficulty:"normal",color:"green"},{id:"green16",cardFace:l.green16,difficulty:"easy",color:"green"},{id:"green17",cardFace:l.green17,difficulty:"easy",color:"green"},{id:"green18",cardFace:l.green18,difficulty:"easy",color:"green"}];function b(e,r){return Math.floor(Math.random()*(r-e+1))+e}const f=document.querySelector(".shuffle-section"),s=document.querySelector(".deck-section");function u(){f.classList.add("hidden")}function g(){s.classList.add("hidden")}!function(){const e=document.querySelector(".ancient-section");let r="";c.forEach((e=>{r+=`\n      <div class="ancient" style="background-image: url('${e.cardFace}');"></div>\n    `})),e.innerHTML=r}();const w=document.querySelector(".difficulties-section");!function(){let e="";n.forEach((r=>{e+=`\n      <div class="difficulties">${r.name}</div>\n    `})),w.innerHTML=e}();const h=document.querySelectorAll(".ancient"),y=document.querySelectorAll(".difficulties");function p(e){e.target.classList.contains("active")||(h.forEach((e=>e.classList.remove("active"))),e.target.classList.add("active"),w.classList.remove("hidden"),y.forEach((e=>e.classList.remove("active"))),u(),g())}function m(e){e.target.classList.contains("active")||(y.forEach((e=>e.classList.remove("active"))),e.target.classList.add("active"),f.classList.remove("hidden"),g())}h.forEach((e=>e.addEventListener("click",p))),y.forEach((e=>e.addEventListener("click",m)));let F=[];function C(e){h.forEach(((e,r)=>{e.classList.contains("active")&&(F=[c[r].firstStage,c[r].secondStage,c[r].thirdStage])}))}h.forEach((e=>e.addEventListener("click",C)));let v,S=[];function L(){y.forEach(((e,r)=>{e.classList.contains("active")&&(S=n[r].cardsDifficulty)}))}function E(e,r){let c=[],n=[];for(let e=0;e<S.length;e++){let c=r.filter((r=>r.difficulty==S[e]));n.push(...c)}if(1==S.length){let c=r.filter((e=>"normal"==e.difficulty));for(;n.length<e;){let e=c[b(0,c.length-1)];n.includes(e)||n.push(e)}}for(;c.length<e;){let e=n[b(0,n.length-1)].cardFace;c.includes(e)||c.push(e)}return c}function k(){const e=F.reduce(((e,r)=>[e[0]+=r.greenCards,e[1]+=r.brownCards,e[2]+=r.blueCards]),[0,0,0]);return{greenCards:E(e[0],t),brownCards:E(e[1],d),blueCards:E(e[2],i)}}function q(){const e=document.querySelector(".current-state"),r=["Этап I","Этап II","Этап III"];let c="";for(let e=0;e<3;e++)c+=`\n      <div class="stage">\n        <div class="stage-heading-wrapper">\n          <h4 class="stage-heading">${r[e]}</h4>\n        </div>\n        <div class="deck-count">\n          <div class="count green">${v[e].greenCards.length}</div>\n          <div class="count yellow">${v[e].brownCards.length}</div>\n          <div class="count blue">${v[e].blueCards.length}</div>\n        </div>\n      </div>\n    `;e.innerHTML=c}y.forEach((e=>e.addEventListener("click",L)));const I=document.querySelector(".shuffle-btn"),$=document.querySelector(".deck"),D=document.querySelector(".last-card");I.addEventListener("click",(function(){$.classList.remove("invisible"),D.style.backgroundImage="",u(),s.classList.remove("hidden")})),I.addEventListener("click",(function(){let e=k(),r=[];function c(r,c){let n=[];for(;n.length<F[c][r];){let c=e[r].pop();n.push(c)}return n}for(let e=0;e<3;e++)r.push({greenCards:c("greenCards",e),brownCards:c("brownCards",e),blueCards:c("blueCards",e)});v=r})),I.addEventListener("click",q),I.addEventListener("click",k),$.addEventListener("click",(function(){let e=["greenCards","brownCards","blueCards"];for(let r=0;r<v.length;r++){let c=b(0,2);if(v[r][e[c]].length>0)return D.style.backgroundImage=`url('${v[r][e[c]].pop()}')`,void q();for(let c=0;c<3;c++)if(v[r][e[c]].length>0)return D.style.backgroundImage=`url('${v[r][e[c]].pop()}')`,void q();2===r&&$.classList.add("invisible")}}))})();